// --------------------------------------------------------------------------------------------
// Copyright (c) 2019 The CefNet Authors. All rights reserved.
// Licensed under the MIT license.
// See the licence file in the project root for full license information.
// --------------------------------------------------------------------------------------------
// Generated by CefGen
// Source: Generated/Native/Types/cef_v8accessor_t.cs
// --------------------------------------------------------------------------------------------﻿
// DO NOT MODIFY! THIS IS AUTOGENERATED FILE!
// --------------------------------------------------------------------------------------------

#pragma warning disable 0169

using System;
using System.Runtime.InteropServices;
using System.Runtime.CompilerServices;
using CefNet.WinApi;
using CefNet.CApi;
using CefNet.Internal;

namespace CefNet
{
	/// <summary>
	/// Structure that should be implemented to handle V8 accessor calls. Accessor
	/// identifiers are registered by calling cef_v8value_t::set_value(). The
	/// functions of this structure will be called on the thread associated with the
	/// V8 accessor.
	/// </summary>
	/// <remarks>
	/// Role: Proxy
	/// </remarks>
	public unsafe partial class CefV8Accessor : CefBaseRefCounted<cef_v8accessor_t>
	{
		internal static unsafe CefV8Accessor Create(IntPtr instance)
		{
			return new CefV8Accessor((cef_v8accessor_t*)instance);
		}

		public CefV8Accessor(cef_v8accessor_t* instance)
			: base((cef_base_ref_counted_t*)instance)
		{
		}

		/// <summary>
		/// Handle retrieval the accessor value identified by |name|. |object| is the
		/// receiver (&apos;this&apos; object) of the accessor. If retrieval succeeds set
		/// |retval| to the return value. If retrieval fails set |exception| to the
		/// exception that will be thrown. Return true (1) if accessor retrieval was
		/// handled.
		/// </summary>
		public unsafe virtual bool Get(string name, CefV8Value @object, ref CefV8Value retval, ref string exception)
		{
			fixed (char* s0 = name)
			fixed (char* s3 = exception)
			{
				var cstr0 = new cef_string_t { Str = s0, Length = name != null ? name.Length : 0 };
				cef_v8value_t* p2 = (retval != null) ? retval.GetNativeInstance() : null;
				cef_v8value_t** pp2 = &p2;
				var cstr3 = new cef_string_t { Str = s3, Length = exception != null ? exception.Length : 0 };
				var rv = NativeInstance->Get(&cstr0, (@object != null) ? @object.GetNativeInstance() : null, pp2, &cstr3) != 0;
				retval = CefV8Value.Wrap(CefV8Value.Create, p2);
				exception = CefString.ReadAndFree(&cstr3);
				GC.KeepAlive(this);
				return rv;
			}
		}

		/// <summary>
		/// Handle assignment of the accessor value identified by |name|. |object| is
		/// the receiver (&apos;this&apos; object) of the accessor. |value| is the new value
		/// being assigned to the accessor. If assignment fails set |exception| to the
		/// exception that will be thrown. Return true (1) if accessor assignment was
		/// handled.
		/// </summary>
		public unsafe virtual bool Set(string name, CefV8Value @object, CefV8Value value, ref string exception)
		{
			fixed (char* s0 = name)
			fixed (char* s3 = exception)
			{
				var cstr0 = new cef_string_t { Str = s0, Length = name != null ? name.Length : 0 };
				var cstr3 = new cef_string_t { Str = s3, Length = exception != null ? exception.Length : 0 };
				var rv = NativeInstance->Set(&cstr0, (@object != null) ? @object.GetNativeInstance() : null, (value != null) ? value.GetNativeInstance() : null, &cstr3) != 0;
				exception = CefString.ReadAndFree(&cstr3);
				GC.KeepAlive(this);
				return rv;
			}
		}
	}
}
